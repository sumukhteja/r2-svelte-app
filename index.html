import { DynamoDBClient, GetItemCommand } from "@aws-sdk/client-dynamodb";

export default {
  async fetch(request: Request, env: Env): Promise<Response> {
    const client = new DynamoDBClient({
      region: "ap-south-1", // Change to your region
      credentials: {
        accessKeyId: env.AWS_ACCESS_KEY_ID,
        secretAccessKey: env.AWS_SECRET_ACCESS_KEY
      }
    });

    const command = new GetItemCommand({
      TableName: "your-dynamodb-table-name",
      Key: {
        id: { S: "example-id" }
      }
    });

    const data = await client.send(command);

    return new Response(JSON.stringify(data), {
      headers: { "Content-Type": "application/json" }
    });
  }
};
